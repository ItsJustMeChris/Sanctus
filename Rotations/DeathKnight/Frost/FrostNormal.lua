--# Executed every time the actor is available.
function frostDeathKnightRotation()
    local target = "target"
--actions+=/pillar_of_frost
    if shouldCast(target) then
        Cast(Pillar_Of_Frost, target)
    end
--actions+=/use_item,slot=trinket1
--no
--actions+=/use_item,slot=trinket2
--no
--actions+=/use_item,slot=finger1
--no
--actions+=/use_item,slot=finger2
--no
--actions+=/arcane_torrent,if=runic_power.deficit>20
--fuck blood elf
--actions+=/blood_fury,if=!talent.breath_of_sindragosa.enabled|dot.breath_of_sindragosa.ticking
    if talent(Breath_of_Sindragosaue_t) and not buff(Breath_Of_Sindragosa, "player") then
        Cast(Breath_Of_Sindragosa)
    end
--actions+=/berserking,if=buff.pillar_of_frost.up
--actions+=/potion,name=old_war,if=buff.pillar_of_frost.up
--actions+=/sindragosas_fury,if=buff.pillar_of_frost.up&debuff.razorice.stack=5&buff.unholy_strength.up
--actions+=/obliteration,if=(!talent.runic_attenuation.enabled&!talent.icy_talons.enabled)
--actions+=/call_action_list,name=bos,if=talent.breath_of_sindragosa.enabled
--actions+=/call_action_list,name=shatter,if=talent.shattering_strikes.enabled
--actions+=/call_action_list,name=storm,if=talent.gathering_storm.enabled
--actions+=/call_action_list,name=machinegun,if=(talent.icy_talons.enabled&(talent.runic_attenuation.enabled|talent.frostscythe.enabled))
--actions+=/call_action_list,name=generic,if=(!talent.shattering_strikes.enabled&!talent.icy_talons.enabled)
--
--actions.bos=howling_blast,target_if=!dot.frost_fever.ticking
--actions.bos+=/breath_of_sindragosa,if=runic_power>=50
--actions.bos+=/frost_strike,if=!dot.breath_of_sindragosa.ticking&cooldown.breath_of_sindragosa.remains>15&buff.icy_talons.remains<=gcd
--actions.bos+=/howling_blast,if=buff.rime.react&runic_power>40&dot.breath_of_sindragosa.ticking
--actions.bos+=/howling_blast,if=buff.rime.react&!dot.breath_of_sindragosa.ticking
--actions.bos+=/obliterate,if=dot.breath_of_sindragosa.ticking&runic_power<70
--actions.bos+=/obliterate,if=dot.breath_of_sindragosa.ticking&rune>=3
--actions.bos+=/obliterate,if=!dot.breath_of_sindragosa.ticking
--actions.bos+=/remorseless_winter,if=!dot.breath_of_sindragosa.ticking
--actions.bos+=/frost_strike,if=!dot.breath_of_sindragosa.ticking&cooldown.breath_of_sindragosa.remains>15
--actions.bos+=/horn_of_winter
--actions.bos+=/empower_rune_weapon,if=runic_power<=40
--actions.bos+=/hungering_rune_weapon,if=runic_power<=40
--
--actions.core=frost_strike,if=buff.obliteration.up&!buff.killing_machine.react
--actions.core+=/remorseless_winter,if=(spell_targets.remorseless_winter>=2|talent.gathering_storm.enabled)&!talent.frozen_pulse.enabled
--actions.core+=/frostscythe,if=!talent.breath_of_sindragosa.enabled&(buff.killing_machine.react|spell_targets.frostscythe>=4)
--actions.core+=/glacial_advance
--actions.core+=/obliterate,if=buff.killing_machine.react
--actions.core+=/obliterate
--
--actions.storm=frost_strike,if=buff.icy_talons.remains<=gcd|runic_power>=70
--actions.storm+=/howling_blast,target_if=!dot.frost_fever.ticking&buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/remorseless_winter,if=rune>=3&buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/howling_blast,if=buff.rime.react&buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/obliterate,if=buff.killing_machine.react&buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/glacial_advance,if=buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/obliterate,if=(cooldown.remorseless_winter.remains>2|dot.remorseless_winter.ticking|rune>=3)&buff.icy_talons.remains>=gcd+0.1
--actions.storm+=/frost_strike,if=buff.icy_talons.stack<3
--actions.storm+=/remorseless_winter,if=rune>=3
--actions.storm+=/glacial_advance
--actions.storm+=/obliterate,if=cooldown.remorseless_winter.remains>2|dot.remorseless_winter.ticking|rune>=3
--actions.storm+=/frost_strike,if=runic_power>=40
--actions.storm+=/horn_of_winter,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.storm+=/horn_of_winter,if=!talent.breath_of_sindragosa.enabled
--actions.storm+=/empower_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.storm+=/hungering_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.storm+=/empower_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--actions.storm+=/hungering_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--
--actions.generic=howling_blast,target_if=!dot.frost_fever.ticking
--actions.generic+=/howling_blast,if=buff.rime.react
--actions.generic+=/frost_strike,if=runic_power>=80
--actions.generic+=/call_action_list,name=core
--actions.generic+=/horn_of_winter,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.generic+=/horn_of_winter,if=!talent.breath_of_sindragosa.enabled
--actions.generic+=/frost_strike,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.generic+=/frost_strike,if=!talent.breath_of_sindragosa.enabled
--actions.generic+=/empower_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.generic+=/hungering_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.generic+=/empower_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--actions.generic+=/hungering_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--
--actions.machinegun=frost_strike,if=buff.icy_talons.remains<=gcd|runic_power>=80
--actions.machinegun+=/howling_blast,target_if=!dot.frost_fever.ticking&buff.icy_talons.remains>=gcd+0.1
--actions.machinegun+=/howling_blast,if=buff.rime.up&!buff.obliteration.up
--actions.machinegun+=/obliteration,if=rune>=2&runic_power>=25
--actions.machinegun+=/frost_strike,if=buff.obliteration.up&!buff.killing_machine.up
--actions.machinegun+=/obliterate,if=buff.icy_talons.remains>gcd+0.1&buff.killing_machine.up&runic_power<15&buff.obliteration.remains>=gcd+01
--actions.machinegun+=/frostscythe,if=buff.icy_talons.remains>=gcd+0.1&buff.killing_machine.up&rune=1
--actions.machinegun+=/obliterate,if=buff.icy_talons.remains>gcd+0.1
--actions.machinegun+=/glacial_advance,if=buff.icy_talons.remains>=gcd+0.1
--actions.machinegun+=/remorseless_winter,if=buff.icy_talons.remains>=gcd+0.1&!buff.killing_machine.up
--actions.machinegun+=/frost_strike,if=buff.icy_talons.stack<3
--actions.machinegun+=/obliterate
--actions.machinegun+=/glacial_advance
--actions.machinegun+=/remorseless_winter,if=!buff.killing_machine.up
--actions.machinegun+=/frost_strike,if=runic_power>=40&talent.runic_attenuation.enabled
--actions.machinegun+=/frost_strike,if=runic_power>=50
--actions.machinegun+=/horn_of_winter,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.machinegun+=/horn_of_winter,if=!talent.breath_of_sindragosa.enabled
--actions.machinegun+=/empower_rune_weapon,if=rune<1&runic_power<40&talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.machinegun+=/hungering_rune_weapon,if=rune<1&runic_power<40&talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.machinegun+=/empower_rune_weapon,if=rune<1&runic_power<40&!talent.breath_of_sindragosa.enabled
--actions.machinegun+=/hungering_rune_weapon,if=rune<1&runic_power<40&!talent.breath_of_sindragosa.enabled
--
--actions.shatter=frost_strike,if=debuff.razorice.stack=5
--actions.shatter+=/howling_blast,target_if=!dot.frost_fever.ticking
--actions.shatter+=/howling_blast,if=buff.rime.react
--actions.shatter+=/frost_strike,if=runic_power>=80
--actions.shatter+=/call_action_list,name=core
--actions.shatter+=/horn_of_winter,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.shatter+=/horn_of_winter,if=!talent.breath_of_sindragosa.enabled
--actions.shatter+=/frost_strike,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.shatter+=/frost_strike,if=!talent.breath_of_sindragosa.enabled
--actions.shatter+=/empower_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.shatter+=/hungering_rune_weapon,if=talent.breath_of_sindragosa.enabled&cooldown.breath_of_sindragosa.remains>15
--actions.shatter+=/empower_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--actions.shatter+=/hungering_rune_weapon,if=!talent.breath_of_sindragosa.enabled
--
end
